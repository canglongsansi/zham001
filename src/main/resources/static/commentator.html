<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title></title>

	<link rel="stylesheet" href="css/amazeui.min.css">
	<link rel="stylesheet" href="css/admin.css">
	<link rel="stylesheet" href="css/app.css">
</head>

<body>

<div class="am-cf admin-main" >
	<!-- content start -->
	<div class="admin-content">
		<div class="admin-content-body">

			<div class="container" style="padding: 50px 10px 0px 10px">
				<div class="am-g">
					<div class="am-u-sm-12 am-u-md-6">
						<div class="am-btn-toolbar">
							<div class="am-btn-group am-btn-group-xs">
								<button type="button" class="am-btn am-btn-default search">
									<span class="icon-plus"></span> 筛选即将过期合同
								</button>
							</div>
						</div>
					</div>
					<div class="am-u-sm-12 am-u-md-3">

						<select id="selDepart" data-am-selected="{btnSize: 'sm'}" style="display: none;">
							<option value="0">
								请选择部门
							</option>
							<option value="14">
								研发部
							</option>
							<option value="22">
								市场部
							</option>
						</select>
						<div class="am-selected am-dropdown " id="am-selected-dhh2q" data-am-dropdown=""> <button type="button" class="am-selected-btn am-btn am-dropdown-toggle am-btn-sm am-btn-default">    <span class="am-selected-status am-fl">请选择部门</span>    <i class="am-selected-icon am-icon-caret-down"></i>  </button>
							<div class="am-selected-content am-dropdown-content">
								<h2 class="am-selected-header"><span class="am-icon-chevron-left">返回</span></h2>
								<ul class="am-selected-list">
									<li class="am-checked" data-index="0" data-group="0" data-value="0"> <span class="am-selected-text">请选择部门</span> <i class="am-icon-check"></i></li>
									<li class="" data-index="1" data-group="0" data-value="14"> <span class="am-selected-text">研发部</span> <i class="am-icon-check"></i></li>

								</ul>
								<div class="am-selected-hint"></div>
							</div>
						</div>
						<div class="am-selected am-dropdown " id="am-selected-z6ofo" data-am-dropdown="">
							<button style="display: none;" type="button" class="am-selected-btn am-btn am-dropdown-toggle am-btn-sm am-btn-default">
								<span class="am-selected-status am-fl">请选择部门</span>
								<i class="am-selected-icon am-icon-caret-down"></i>
							</button>
							<div class="am-selected-content am-dropdown-content">
								<h2 class="am-selected-header">
									<span class="am-icon-chevron-left">返回</span>
								</h2>
								<ul class="am-selected-list">
									<li class="am-checked" data-index="0" data-group="0" data-value="option1">
										<span class="am-selected-text">请选择部门</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">研发部</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">市场部</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">渠道一部</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">教学部</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">教务部</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">渠道二部</span>
										<i class="am-icon-check"></i>
									</li>

									<li class="" data-index="1" data-group="0" data-value="option2">
										<span class="am-selected-text">渠道三部</span>
										<i class="am-icon-check"></i>
									</li>

								</ul>
								<div class="am-selected-hint"></div>
							</div>
						</div>
					</div>

					<div class="am-u-sm-12 am-u-md-3">
						<div class="am-input-group am-input-group-sm">
							<input class="am-form-field" placeholder="请输入员工姓名" id="username" type="text">
							<span class="am-input-group-btn">
										<button class="am-btn am-btn-default" type="button" id="btnsearch">
											搜索
										</button> </span>
						</div>
					</div>
				</div>
				<div class="am-g" style="margin-top: -30px;">
					<div class="am-u-sm-12">
						<form class="am-form" action="user/delAll.action">
							<table class="am-table am-table-striped am-table-hover table-main">
								<thead>
								<tr>
									<th class="table-check">
										<input id="chkAll" type="checkbox">
									</th>
									<th class="table-id">
										ID
									</th>
									<th>
										姓名
									</th>
									<th>
										艺名
									</th>
									<th>
										签约起始日期
									</th>
									<th>
										到期日期
									</th>
									<th>
										电话号
									</th>
									<th>
										纸质是否归档
									</th>
									<th>
										附件管理
									</th>
									<th class="table-set">
										操作
									</th>
								</tr>
								</thead>
								<tbody id="tUser">
								<tr>
									<td><input name="ids" value="1" type="checkbox"></td>
									<td>1</td>
									<td>admin</td>
									<td>
										<a href="#">张三</a>
									</td>
									<td><span class="am-badge am-badge-secondary">男</span></td>
									<td>开发部</td>
									<td>2332@qq.com</td>
									<td>
										<div class="am-btn-toolbar">
											<div class="am-btn-group am-btn-group-xs"><button type="button" class="am-btn am-btn-default am-btn-xs am-text-secondary btnEdit"><span class="am-icon-pencil-square-o"></span> 编辑</button><button type="button" class="am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only" onclick="delUser(1,1)"><span class="am-icon-trash-o"></span> 删除</button></div>
										</div>
									</td>
								</tr>
								</tbody>
							</table>

						</form>
					</div>
				</div>
			</div>

		</div>
		<!-- content end -->
	</div>
</div>

<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->

<!--[if (gte IE 9)|!(IE)]><!-->
<script src="js/jquery-1.11.3.min.js"></script>
<!--<![endif]-->
<script type="text/javascript" src="myplugs/js/plugs.js"></script>
<script>
    $(function() {
        $.ajax({
            type: "POST",
            url: "/CommentatorContract",
            dataType: "json",
            success: function (data) {

                var dataObj = data;
                con = "";

                $.each(dataObj, function(index, item){
                    var toFile = '否';
                    if(item.tofile == 1){
                        toFile = '是';
                    }else{
                        toFile;
                    }
                    con += "<tr>" +
                        "<td><input name=\"ids\" value=\"1\" type=\"checkbox\"></td>" +
                        "<td>"+item.id+"</td>" +
                        "<td>"+item.aName+"</td><td>" +
                        ""+item.stageName+"</td>" +
                        "<td>"+item.fromtime+"</td>" +
                        "<td>"+item.totime+"</td>" +
                        "<td>"+item.tel+"</td>" +
                        "<td>"+toFile+"</td>" +
                        "<td><div class=\"am-btn-toolbar\"><div class=\"am-btn-group am-btn-group-xs\"><form method=\"POST\" enctype=\"multipart/form-data\" action=\"ArtistBrokerageContract_upload\"><input type=\"file\" name=\"file\" style=\"width: 230px;height: 25px;\"/><input type=\"submit\" value=\"上传\" style=\"background:#df3834;\"></form><button type=\"button\" data-name="+item.filehost+" class=\"am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only down\"><span class=\"am-icon-trash-o\"></span> 下载</button></div></div></td>" +
                        "<td><div class=\"am-btn-toolbar\"><div class=\"am-btn-group am-btn-group-xs\"><button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-secondary btnEdit\"><span class=\"am-icon-pencil-square-o\"></span> 编辑</button></div></div></td></tr>"
                });
                $("#tUser").html(con);
                $(".down").click(function () {
                    var fileName=($(this).attr("data-name"));
					window.location.href="/fileDownLoad_commentator.action?fileName="+fileName;
                });
               /* $(".down").click(function() {
                    var a=($(this).attr("data-name"));
                    console.log(a);
                    $.ajax({
                        type: "GET",
                        url: "/fileDownLoad_commentator.action",
                        data: {
                            "fileName" : a
						},
                        contentType:"application/json",
                        dataType: "json",
                        success: function(response, status, request) {
                            var disp = request.getResponseHeader('Content-Disposition');
                            if (disp && disp.search('attachment') != -1) {  //判断是否为文件
                                var form = $('<form method="POST" action="' + "/fileDownLoad_commentator.action?"+a+ + '">');
                                $.each(params, function(k, v) {
                                    form.append($('<input type="hidden" name="' + k +
                                        '" value="' + v + '">'));
                                });
                                $('body').append(form);
                                form.submit(); //自动提交
                            }
                        }


                    });
                });*/
            }

        });

        $(".search").click(function() {
            $.ajax({
                type: "POST",
                url: "/CommentatorContract_search",
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    var dataObj = data;
                    con = "";

                    $.each(dataObj, function(index, item){
                        var toFile = '否';
                        if(item.tofile == 1){
                            toFile = '是';
                        }else{
                            toFile;
                        }
                        con += "<tr>" +
                            "<td><input name=\"ids\" value=\"1\" type=\"checkbox\"></td>" +
                            "<td>"+item.id+"</td>" +
                            "<td>"+item.aName+"</td><td>" +
                            ""+item.stageName+"</td>" +
                            "<td>"+item.fromtime+"</td>" +
                            "<td>"+item.totime+"</td>" +
                            "<td>"+item.tel+"</td>" +
                            "<td>"+toFile+"</td>" +
                            "<td><div class=\"am-btn-toolbar\"><div class=\"am-btn-group am-btn-group-xs\"><form method=\"POST\" enctype=\"multipart/form-data\" action=\"ArtistBrokerageContract_upload\"><input type=\"file\" name=\"file\" style=\"width: 230px;height: 25px;\"/><input type=\"submit\" value=\"上传\" style=\"background:#df3834;\"></form><button type=\"button\" data-name="+item.filehost+" class=\"am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only down\"><span class=\"am-icon-trash-o\"></span> 下载</button></div></div></td>" +
                            "<td><div class=\"am-btn-toolbar\"><div class=\"am-btn-group am-btn-group-xs\"><button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-secondary btnEdit\"><span class=\"am-icon-pencil-square-o\"></span> 编辑</button></div></div></td></tr>"
                    });
                    $("#tUser").html(con);
                    $(".down").click(function () {
                        var fileName=($(this).attr("data-name"));
                        window.location.href="/fileDownLoad_commentator.action?fileName="+fileName;
                    });
                   /* $(".down").click(function() {
                        var a=($(this).attr("data-name"));
                        $.ajax({
                            type: "GET",
                            url: "/fileDownLoad_commentator.action",
                            data:a,
                            dataType: "json",
                            success:function () {
                            }
                        });
                    });*/
                }
            });
        });

        /*$(".down").click(function() {
            alert(1)
            $.ajax({
                type: "GET",
                url: "/fileDownLoad_commentator.action",
				data:'',
                dataType: "json",
				success:function () {

                }
            });

        });*/

    });
</script>
</body>

</html>